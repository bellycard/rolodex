(function(){angular.module("rolodex",["rolodex.alert","rolodex.dropdown","rolodex.modal","rolodex.stepper"])}).call(this),angular.module("rolodex").run(["$templateCache",function(e){e.put("components/alert/alert.html",'<div ng-class="[\'alert-banner-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert"><button aria-hidden="true" class="i-close" ng-click="close()" ng-show="closeable" type="button">&times;</button><div ng-transclude=""></div></div>'),e.put("components/modal/window.html",'<div class="modal" ng-class="{\'modal-fade\': animate}" ng-click="close($event)" role="dialog" tabindex="-1"><div class="modal-content" modal-transclude=""></div></div>'),e.put("components/stepper/stepper.html",'<input name="{{name}}" type="number" ng-model="ngModel" min="{{min}}" placeholder="{{min}}"><div class="stepper"><div class="btn-decrement" ng-disabled="!canDecrement()" ng-click="canDecrement() && decrement()">&ndash;</div><div class="btn-increment" ng-disabled="!canIncrement()" ng-click="canIncrement() && increment()">+</div></div>')}]),function(){angular.module("rolodex.alert",[]).controller("AlertController",["$scope","$attrs",function(e,n){return e.closeable="close"in n}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"components/alert",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}})}.call(this),function(){angular.module("rolodex.dropdown",[]).constant("dropdownConfig",{dropDownOpen:"data-dropdown-open"}).service("dropdownService",["$document","$timeout",function(e,n){var t,o,r;return r=null,this.open=function(n){return r||(e.bind("click",t),e.bind("keydown",o)),r&&r!==n&&(r.isOpen=!1),r=n},this.close=function(i){return r===i||i.forceClose?(i.forceClose&&(r&&(r.isOpen=!1),n(function(){return i.isOpen=!1})),r=null,e.unbind("click",t),e.unbind("keydown",o)):void 0},t=function(e){var n;return n=r.getToggleElement(),e&&(null!=n?n[0].contains(e.target):void 0)||"input"===(null!=e?e.target.nodeName.toLowerCase():void 0)?void 0:r.$apply(function(){return r.isOpen=!1})},o=function(e){return 27===e.which?(r.focusToggleElement(),t()):void 0},this}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,n,t,o,r,i){var a,l,c,u,s,d;return u=this,c=e.$new(),a=o.dropDownOpen,l=void 0,s=angular.noop,d=n.onToggle?t(n.onToggle):angular.noop,this.init=function(o){return u.$element=o,n.isOpen?(l=t(n.isOpen),s=l.assign,e.$watch(l,function(e){return c.isOpen=!!e})):void 0},this.toggle=function(e){return c.isOpen=arguments.length?!!e:!c.isOpen},this.isOpen=function(){return c.isOpen},c.getToggleElement=function(){return u.toggleElement},c.focusToggleElement=function(){u.toggleElement&&u.toggleElement[0].focus()},c.$watch("isOpen",function(n,t){var o;return o=u.$element.find("a"),n?(u.$element.attr(a,""),c.focusToggleElement(),r.open(c),o.length&&(c.forceClose=!0,_.each(o,function(e){return angular.element(e).on("click",function(e){return r.close(c),c.$digest()})}))):(u.$element.removeAttr(a),r.close(c)),s(e,n),angular.isDefined(n)&&n!==t?d(e,{open:!!n}):void 0}),e.$on("$locationChangeSuccess",function(){return c.isOpen=!1}),e.$on("$destroy",function(){return c.$destroy()}),this}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,n,t,o){return o.init(n)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,n,t,o){var r;if(o)return o.toggleElement=n,r=function(r){return r.preventDefault(),n.hasClass("disabled")||t.disabled?void 0:e.$apply(function(){return o.toggle()})},n.bind("click",r),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(o.isOpen,function(e){return n.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){return n.unbind("click",r)})}}})}.call(this),function(){angular.module("rolodex.stepper",[]).directive("blyStepper",function(){return{restrict:"AE",require:"ngModel",scope:{min:"@",max:"@",step:"@",name:"@",ngModel:"=",ngDisabled:"="},templateUrl:"components/stepper/stepper",link:function(e,n,t,o){var r;return e.step||(e.step=1),e.min&&(e.min=_.parseInt(e.min)),e.max&&(e.max=_.parseInt(e.max)),o.$formatters.push(function(e){return _.parseInt(e)}),o.$parsers.push(function(e){return _.parseInt(e)}),r=function(n){return o.$setViewValue(_.parseInt(n)),o.$render(),e.$emit("stepper:update",n)},e.canDecrement=function(){return e.min?angular.isDefined(e.min)&&o.$viewValue>=e.min&&o.$viewValue+-e.step>=e.min:!0},e.canIncrement=function(){return e.max?(angular.isDefined(e.max)&&o.$viewValue<=e.max,o.$viewValue+ +e.step<=e.max):!0},e.increment=function(){var n;return n=o.$viewValue+ +e.step,r(n),e.$emit("stepper:increment",n)},e.decrement=function(){var n;return n=o.$viewValue+-e.step,r(n),e.$emit("stepper:decrement",n)},n.find("input").bind("blur",function(){return isNaN(o.$viewValue)&&r(e.min),e.$apply(function(){return e.ngModel=_.parseInt(o.$modelValue)})})}}})}.call(this),function(){angular.module("rolodex.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,n,t){var o,r,i,a,l;return i=function(e){var n;for(n in e)if(void 0!==a.style[n])return e[n]},o=function(r,i,a){var l,c,u;return a=a||{},l=e.defer(),c=o[a.animation?"animationEndEventName":"transitionEndEventName"],u=function(e){t.$apply(function(){r.unbind(c,u),l.resolve(r)})},c&&r.bind(c,u),n(function(){angular.isString(i)?r.addClass(i):angular.isFunction(i)?i(r):angular.isObject(i)&&r.css(i),c||l.resolve(r)}),l.promise.cancel=function(){c&&r.unbind(c,u),l.reject("Transition cancelled")},l.promise},a=document.createElement("trans"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},r={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"},o.transitionEndEventName=i(l),o.animationEndEventName=i(r),o}]),angular.module("rolodex.modal",["rolodex.transition","templates"]).factory("$$stackedMap",function(){return{createNew:function(){var e;return e=[],{add:function(n,t){return e.push({key:n,value:t})},get:function(n){var t;for(t=0;t<e.length;){if(n===e[t].key)return e[t];t++}},keys:function(){var n,t;for(t=[],n=0;n<e.length;)t.push(e[n].key),n++;return t},top:function(){return e[e.length-1]},remove:function(n){var t,o;for(o=-1,t=0;t<e.length;){if(n===e[t].key){o=t;break}t++}return e.splice(o,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalWindow",["$modalStack","$timeout",function(e,n){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,n){return n.templateUrl||"components/modal/window"},link:function(t,o,r){return o.addClass(r.windowClass||""),t.size=r.size,n(function(){t.animate=!0,o[0].querySelectorAll("[autofocus]").length||o[0].focus()}),t.close=function(n){var t;return t=e.getTop(),t&&t.value.backdrop&&"static"!==t.value.backdrop&&n.target===n.currentTarget?(n.preventDefault(),n.stopPropagation(),e.dismiss(t.key,"backdrop click")):void 0}}}}]).directive("modalTransclude",function(){return{link:function(e,n,t,o,r){return r(e.$parent,function(e){return n.empty(),n.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,n,t,o,r,i){var a,l,c,u,s,d,p,m,f;return u=function(){var e,n,t;for(t=-1,n=p.keys(),e=0;e<n.length;)p.get(n[e]).value.backdrop&&(t=e),e++;return t},f=function(e){var n,o;n=t.find("body").eq(0),o=p.get(e).value,p.remove(e),m(o.modalDomEl,o.modalScope,300,function(){o.modalScope.$destroy(),n.toggleClass(l,p.length()>0),d()})},d=function(){var e,n,t;e&&-1===u()&&(t=n,m(e,n,150,function(){t.$destroy(),t=null}),e=void 0,n=void 0)},m=function(t,o,r,i){var a,l,c;a=function(){a.done||(a.done=!0,t.remove(),i&&i())},o.animate=!1,c=e.transitionEndEventName,c?(l=n(a,r),t.bind(c,function(){n.cancel(l),a(),o.$apply()})):n(a)},l="modal-open",c=void 0,s=void 0,p=i.createNew(),a={},r.$watch(u,function(e){s&&(s.index=e)}),t.bind("keydown",function(e){var n;n=void 0,27===e.which&&(n=p.top(),n&&n.value.keyboard&&(e.preventDefault(),r.$apply(function(){a.dismiss(n.key,"escape key press")})))}),a.open=function(e,n){var i,a,d,m,f;p.add(e,{deferred:n.deferred,modalScope:n.scope,backdrop:n.backdrop,keyboard:n.keyboard}),d=t.find("body").eq(0),m=u(),m>=0&&!c&&(s=r.$new(!0),s.index=m,i=angular.element("<div modal-backdrop></div>"),i.attr("backdrop-class",n.backdropClass),c=o(i)(s),d.append(c)),a=angular.element("<div modal-window></div>"),a.attr({"template-url":n.windowTemplateUrl,"window-class":n.windowClass,size:n.size,index:p.length()-1,animate:"animate"}).html(n.content),f=o(a)(n.scope),p.top().value.modalDomEl=f,d.append(f),d.addClass(l)},a.close=function(e,n){var t;t=p.get(e),t&&(t.value.deferred.resolve(n),f(e))},a.dismiss=function(e,n){var t;t=p.get(e),t&&(t.value.deferred.reject(n),f(e))},a.dismissAll=function(e){var n;for(n=this.getTop();n;)this.dismiss(n.key,e),n=this.getTop()},a.getTop=function(){return p.top()},a}]).provider("$modal",function(){var e;return e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(n,t,o,r,i,a,l){var c,u,s;return s=function(e){return e.template?o.when(e.template):r.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:i}).then(function(e){return e.data})},u=function(e){var t;return t=[],angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&t.push(o.when(n.invoke(e)))}),t},c={},c.open=function(n){var r,i,c,d,p,m;if(c=o.defer(),i=o.defer(),r={result:c.promise,opened:i.promise,close:function(e){l.close(r,e)},dismiss:function(e){l.dismiss(r,e)}},n=angular.extend({},e.options,n),n.resolve=n.resolve||{},!n.template&&!n.templateUrl)throw new Error("One of template or templateUrl options is required.");return m=o.all([s(n)].concat(u(n.resolve))),m.then(p=function(e){var o,i,u,s;return u=(n.scope||t).$new(),u.$close=r.close,u.$dismiss=r.dismiss,o=void 0,i={},s=1,n.controller&&(i.$scope=u,i.$modalInstance=r,angular.forEach(n.resolve,function(n,t){i[t]=e[s++]}),o=a(n.controller,i),n.controller&&(u[n.controllerAs]=o)),l.open(r,{scope:u,deferred:c,content:e[0],backdrop:n.backdrop,keyboard:n.keyboard,backdropClass:n.backdropClass,windowClass:n.windowClass,windowTemplateUrl:n.windowTemplateUrl,size:n.size})},d=function(e){return c.reject(e)}),m.then(function(){return i.resolve(!0)},function(){return i.reject(!1)}),r},c}]}})}.call(this);